CREATE DATABASE PROJECT_64132775;
GO
USE PROJECT_64132775;
GO
CREATE TABLE BOPHAN (
    MABP VARCHAR(10) PRIMARY KEY,
    TENBP NVARCHAR(255) NOT NULL
);
GO
INSERT INTO BOPHAN (MABP, TENBP) VALUES 
('BP_TVKH', N'Bộ phận tư vấn bán hàng'),
('BP_KTSC', N'Bộ phận kỹ thuật sửa chữa'),
('BP_QLCH', N'Bộ phận quản lý cửa hàng'),
('BP_KHO', N'Bộ phận giao hàng và quản lý kho hàng');
GO
CREATE TABLE NHANVIEN (
    MANV VARCHAR(10) PRIMARY KEY,
    HONV NVARCHAR(255) NOT NULL,
    TENNV NVARCHAR(255) NOT NULL,
    GIOITINH BIT DEFAULT(1),
    CHUCVU NVARCHAR(50) NOT NULL,
    SDT VARCHAR(11) NOT NULL,
    DIACHI NVARCHAR(50) NOT NULL,
    MABP VARCHAR(10) NOT NULL,
    FOREIGN KEY (MABP) REFERENCES BOPHAN(MABP) ON UPDATE CASCADE ON DELETE CASCADE
);
GO
INSERT INTO NHANVIEN (MANV, HONV, TENNV, GIOITINH, CHUCVU, SDT, DIACHI, MABP) VALUES 
-- Nhân viên thuộc Bộ phận tư vấn bán hàng
('NVTT1', N'Nguyễn', N'Văn An', 1, N'Nhân viên bán hàng', '0987654321', N'Nha Trang', 'BP_TVKH'),
('NVTT2', N'Phạm', N'Thị Bích Chi', 0, N'Nhân viên bán hàng', '0987654322', N'Khánh Vĩnh', 'BP_TVKH'),
('NVTT3', N'Lê', N'Văn Tuấn Cường', 1, N'Nhân viên bán hàng', '0987654323', N'Diên Hòa', 'BP_TVKH'),
('NVTT4', N'Võ', N'Thị Dương Thùy', 0, N'Nhân viên bán hàng', '0987654324', N'Cam Lâm', 'BP_TVKH'),
('NVTT5', N'Hoàng', N'Xuân Minh', 1, N'Nhân viên bán hàng', '0987654325', N'Cam Ranh', 'BP_TVKH'),
('NVTT6', N'Phan', N'Thị Trúc Tâm', 0, N'Nhân viên bán hàng', '0987654326', N'Nha Trang', 'BP_TVKH'),
('NVTT7', N'Trần', N'Tuấn Thi', 1, N'Nhân viên bán hàng', '0987654327', N'Nha Trang', 'BP_TVKH'),
('NVTT8', N'Ngô', N'Thị Quỳnh Mai', 0, N'Nhân viên bán hàng', '0987654328', N'Diên An', 'BP_TVKH'),

-- Nhân viên thuộc Bộ phận kỹ thuật sửa chữa
('NVTT9', N'Đinh', N'Văn Lê', 1, N'Kỹ thuật viên', '0987654329', N'Nha Trang', 'BP_KTSC'),
('NVTT10', N'Bùi', N'Thị Kiều Trinh', 0, N'Nhân viên kỹ thuật', '0987654330', N'Ninh Hòa', 'BP_KTSC'),
('NVTT11', N'Đoàn', N'Văn Lĩnh', 1, N'Trưởng phòng', '0987654331', N'Nha Trang', 'BP_KTSC'),
('NVTT12', N'Tô', N'Thị Minh Nhài', 0, N'Nhân viên kỹ thuật', '0987654332', N'Diên Phước', 'BP_KTSC'),
('NVTT13', N'Dương', N'Anh Ninh', 1, N'Kỹ thuật viên', '0987654333', N'Diên Hòa', 'BP_KTSC'),
('NVTT14', N'Vũ', N'Thị Phương Quỳnh', 0, N'Nhân viên kỹ thuật', '0987654334', N'Cam Ranh', 'BP_KTSC'),
('NVTT15', N'Huỳnh', N'Văn Quyến', 1, N'Nhân viên kỹ thuật', '0987654335', N'Cam Lâm', 'BP_KTSC'),
('NVTT16', N'Nguyễn', N'Thị Tuyết Vân', 0, N'Nhân viên kỹ thuật', '0987654336', N'Nha Trang', 'BP_KTSC'),

-- Nhân viên thuộc Bộ phận quản lý cửa hàng
('NVTT17', N'Đỗ', N'Xuân Trường', 1, N'Quản lý cửa hàng', '0987654337', N'Nha Trang', 'BP_QLCH'),
('NVTT18', N'Tạ', N'Thị Tôn Kiều', 0, N'Phó quản lý cửa hàng', '0987654338', N'Tuy Hòa', 'BP_QLCH'),
('NVTT19', N'Từ', N'Văn Vũ', 1, N'Trưởng bộ phận tư vấn khách hàng', '0987654339', N'Vạn Dã', 'BP_QLCH'),
('NVTT20', N'Tôn', N'Thị Quyên', 0, N'Phó bộ phận kỹ thuật sửa chữa', '0987654340', N'Ninh Hòa', 'BP_QLCH'),
('NVTT21', N'Quách', N'Văn Mạnh', 1, N'Trưởng bộ phận kỹ thuật sửa chữa', '0987654341', N'Diên An', 'BP_QLCH'),
('NVTT22', N'Triệu', N'Thị Lan Hoa', 0, N'Phó quản lý cửa hàng', '0987654342', N'Nha Trang', 'BP_QLCH'),
('NVTT23', N'Hà', N'Văn Huy', 1, N'Trưởng bộ phận quản lý kho hàng và giao hàng', '0987654343', N'Nha Trang', 'BP_QLCH'),
('NVTT24', N'Khương', N'Thị Mỹ Mỹ', 0, N'Phó bộ phận quản lý kho hàng và giao hàng', '0987654344', N'Cam Lâm', 'BP_QLCH'),

-- Nhân viên thuộc Bộ phận giao hàng và quản lý kho hàng
('NVTT25', N'Đặng', N'Văn Bách', 1, N'Nhân viên giao hàng', '0987654345', N'Nha Trang', 'BP_KHO'),
('NVTT26', N'Lý', N'Thị Châu Triều', 0, N'Nhân viên kho', '0987654346', N'Nha Trang', 'BP_KHO'),
('NVTT27', N'La', N'Văn Tuấn Sơn', 1, N'Nhân viên giao hàng', '0987654347', N'Ninh Hòa', 'BP_KHO'),
('NVTT28', N'Thái', N'Thị Thu Hoài', 0, N'Trợ lý kho', '0987654348', N'Diên Khánh', 'BP_KHO'),
('NVTT29', N'Phùng', N'Văn Trường', 1, N'Nhân viên kho', '0987654349', N'Cam ranh', 'BP_KHO'),
('NVTT30', N'Hoàng', N'Thị Nhung', 0, N'Trợ lý kho', '0987654350', N'Ninh Hòa', 'BP_KHO');
GO
CREATE TABLE HANG_SANXUAT (
    MASX VARCHAR(10) PRIMARY KEY,
    TENSX NVARCHAR(255) NOT NULL
);
GO
INSERT INTO HANG_SANXUAT (MASX, TENSX) 
VALUES 
('SXAPPLE', N'Apple');
GO
CREATE TABLE SANPHAM (
    MASP VARCHAR(10) PRIMARY KEY,
    TENSP NVARCHAR(255) NOT NULL,
    ANHSP NVARCHAR(255),
    GIASP DECIMAL(18,0) NOT NULL,
    MASX VARCHAR(10),
    FOREIGN KEY (MASX) REFERENCES HANG_SANXUAT(MASX) ON UPDATE CASCADE ON DELETE CASCADE
);
GO
INSERT INTO SANPHAM (MASP, TENSP, ANHSP, GIASP, MASX)
VALUES 
('IP11', N'iPhone 11', NULL, 9850000, 'SXAPPLE'),
('IP11PRO', N'iPhone 11 Pro', NULL, 1085000, 'SXAPPLE'),
('IP11PROMAX', N'iPhone 11 ProMax', NULL, 11850000, 'SXAPPLE'),
('IP12', N'iPhone 12', NULL, 10850000, 'SXAPPLE'),
('IP12PRO', N'iPhone 12 PRO', NULL, 1185000, 'SXAPPLE'),
('IP12PROMAX', N'iPhone 12 PROMAX', NULL, 12850000, 'SXAPPLE'),
('IP13', N'iPhone 13', NULL, 11850000, 'SXAPPLE'),
('IP13PRO', N'iPhone 13 PRO', NULL, 1285000, 'SXAPPLE'),
('IP13PROMAX', N'iPhone 13 PROMAX', NULL, 13850000, 'SXAPPLE'),
('IP14', N'iPhone 14', NULL, 12850000, 'SXAPPLE'),
('IP14PLUS', N'iPhone 14 PLUS', NULL, 13850000, 'SXAPPLE'),
('IP14PRO', N'iPhone 14 PRO', NULL, 14850000, 'SXAPPLE'),
('IP14PROMAX', N'iPhone 14 PROMAX', NULL, 15850000, 'SXAPPLE'),
('IP15', N'iPhone 15', NULL, 13850000, 'SXAPPLE'),
('IP15PLUS', N'iPhone 15 PLUS', NULL, 14850000, 'SXAPPLE'),
('IP15PRO', N'iPhone 15 PRO', NULL, 15850000, 'SXAPPLE'),
('IP15PROMAX', N'iPhone 15 PROMAX', NULL, 16850000, 'SXAPPLE'),
('IP16', N'iPhone 16', NULL, 14850000, 'SXAPPLE'),
('IP16PLUS', N'iPhone 16 PLUS', NULL, 15850000, 'SXAPPLE'),
('IP16PRO', N'iPhone 16 PRO', NULL, 16850000, 'SXAPPLE'),
('IP16PROMAX', N'iPhone 16 PROMAX', NULL, 17850000, 'SXAPPLE');
GO
CREATE TABLE MAUSAC (
    MAMAU VARCHAR(30) PRIMARY KEY,
    TENMAU NVARCHAR(255) NOT NULL
);
GO
INSERT INTO MAUSAC (MAMAU, TENMAU)
VALUES 
('M_TIM', N'Tím'),
('M_VANG', N'Vàng'),
('M_XANH_LA', N'Xanh lá'),
('M_DEN', N'Đen'),
('M_TRANG', N'Trắng'),
('M_DO', N'Đỏ'),
('M_XAM', N'Xám'),
('M_XANH_REU', N'Xanh rêu'),
('M_BAC', N'Bạc'),
('M_XANH_DUONG', N'Xanh dương'),
('M_HONG', N'Hồng'),
('M_XANH_LUC', N'Xanh lục'),
('M_TIM_HOANG_GIA', N'Tím hoàng gia'),
('M_DEN_TITAN', N'Đen Titan'),
('M_XANH_TITAN', N'Xanh Titan'),
('M_TRANG_TITAN', N'Trắng Titan'),
('M_TITAN_TN', N'Titan Tự Nhiên'),
('M_TITAN_XAM', N'Titan Xám'),
('M_VANG_TITAN', N'Vàng Titan'),
('M_XANH_TITAN_DAM', N'Xanh Titan Đậm'),
('M_TITAN_BAC', N'Titan Bạc'),
('M_XANH_NHAT', N'Xanh nhạt');
GO
CREATE TABLE MAUSAC_SANPHAM (
    MASP VARCHAR(10),
    MAMAU VARCHAR(30),
    PRIMARY KEY (MASP, MAMAU),
    FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (MAMAU) REFERENCES MAUSAC(MAMAU) ON UPDATE CASCADE ON DELETE CASCADE
);
GO
INSERT INTO MAUSAC_SANPHAM (MASP, MAMAU)
VALUES
('IP11', 'M_TIM'), ('IP11', 'M_VANG'), ('IP11', 'M_XANH_LA'), ('IP11', 'M_DEN'), ('IP11', 'M_TRANG'), ('IP11', 'M_DO'),
('IP11PRO', 'M_XAM'), ('IP11PRO', 'M_VANG'), ('IP11PRO', 'M_XANH_REU'), ('IP11PRO', 'M_BAC'),
('IP11PROMAX', 'M_XAM'), ('IP11PROMAX', 'M_VANG'), ('IP11PROMAX', 'M_XANH_REU'), ('IP11PROMAX', 'M_BAC'),
('IP12', 'M_XANH_DUONG'), ('IP12', 'M_XANH_LA'), ('IP12', 'M_TIM'), ('IP12', 'M_DEN'), ('IP12', 'M_TRANG'), ('IP12', 'M_DO'),
('IP12PRO', 'M_XANH_DUONG'), ('IP12PRO', 'M_VANG'), ('IP12PRO', 'M_BAC'), ('IP12PRO', 'M_XAM'),
('IP12PROMAX', 'M_XANH_DUONG'), ('IP12PROMAX', 'M_VANG'), ('IP12PROMAX', 'M_BAC'), ('IP12PROMAX', 'M_XAM'),
('IP13', 'M_HONG'), ('IP13', 'M_XANH_DUONG'), ('IP13', 'M_DEN'), ('IP13', 'M_TRANG'), ('IP13', 'M_DO'), ('IP13', 'M_XANH_LUC'),
('IP13PRO', 'M_XANH_REU'), ('IP13PRO', 'M_VANG'), ('IP13PRO', 'M_BAC'), ('IP13PRO', 'M_XAM'),
('IP13PROMAX', 'M_XANH_REU'), ('IP13PROMAX', 'M_VANG'), ('IP13PROMAX', 'M_BAC'), ('IP13PROMAX', 'M_XAM'),
('IP14', 'M_XANH_NHAT'), ('IP14', 'M_TIM'), ('IP14', 'M_VANG'), ('IP14', 'M_DEN'), ('IP14', 'M_TRANG'), ('IP14', 'M_DO'),
('IP14PLUS', 'M_XANH_DUONG'), ('IP14PLUS', 'M_XANH_LA'), ('IP14PLUS', 'M_HONG'), ('IP14PLUS', 'M_TRANG'),
('IP14PRO', 'M_TIM_HOANG_GIA'), ('IP14PRO', 'M_VANG'), ('IP14PRO', 'M_BAC'), ('IP14PRO', 'M_DEN'),
('IP14PROMAX', 'M_TIM_HOANG_GIA'), ('IP14PROMAX', 'M_VANG'), ('IP14PROMAX', 'M_BAC'), ('IP14PROMAX', 'M_DEN'),
('IP15', 'M_DEN_TITAN'), ('IP15', 'M_XANH_TITAN'), ('IP15', 'M_TRANG_TITAN'), ('IP15', 'M_XAM'),
('IP15PLUS', 'M_XANH_DUONG'), ('IP15PLUS', 'M_XANH_LA'), ('IP15PLUS', 'M_HONG'), ('IP15PLUS', 'M_TRANG'),
('IP15PRO', 'M_DEN_TITAN'), ('IP15PRO', 'M_XANH_TITAN'), ('IP15PRO', 'M_TRANG_TITAN'), ('IP15PRO', 'M_TITAN_TN'),
('IP15PROMAX', 'M_DEN_TITAN'), ('IP15PROMAX', 'M_XANH_TITAN'), ('IP15PROMAX', 'M_TRANG_TITAN'), ('IP15PROMAX', 'M_TITAN_TN'),
('IP16', 'M_DEN_TITAN'), ('IP16', 'M_XANH_TITAN'), ('IP16', 'M_TRANG_TITAN'), ('IP16', 'M_XAM'),
('IP16PLUS', 'M_XANH_DUONG'), ('IP16PLUS', 'M_XANH_LA'), ('IP16PLUS', 'M_HONG'), ('IP16PLUS', 'M_TRANG'),
('IP16PRO', 'M_DEN_TITAN'), ('IP16PRO', 'M_XANH_TITAN'), ('IP16PRO', 'M_TRANG_TITAN'), ('IP16PRO', 'M_TITAN_TN'),
('IP16PROMAX', 'M_VANG_TITAN'), ('IP16PROMAX', 'M_XANH_TITAN_DAM'), ('IP16PROMAX', 'M_TITAN_XAM'), ('IP16PROMAX', 'M_TITAN_BAC');
GO
CREATE TABLE DUNG_LUONG (
    MADL VARCHAR(10) PRIMARY KEY,
    DUNG_LUONG INT,
);
GO
INSERT INTO DUNG_LUONG (MADL, DUNG_LUONG) 
VALUES 
('DL_64', 64),
('DL_128', 128),
('DL_256', 256),
('DL_512', 512),
('DL_1024', 1024),
('DL_2048', 2048);
GO
CREATE TABLE DUNGLUONG_SANPHAM (
    MASP VARCHAR(10),
    MADL VARCHAR(10),
    PRIMARY KEY (MASP, MADL),
    FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP),
    FOREIGN KEY (MADL) REFERENCES DUNG_LUONG(MADL)
);
GO
INSERT INTO DUNGLUONG_SANPHAM (MASP, MADL)
VALUES
('IP11', 'DL_64'), ('IP11', 'DL_128'), ('IP11', 'DL_256'), ('IP11', 'DL_512'),
('IP11PRO', 'DL_64'), ('IP11PRO', 'DL_128'), ('IP11PRO', 'DL_256'), ('IP11PRO', 'DL_512'),
('IP11PROMAX', 'DL_64'), ('IP11PROMAX', 'DL_128'), ('IP11PROMAX', 'DL_256'), ('IP11PROMAX', 'DL_512'),
('IP12', 'DL_64'), ('IP12', 'DL_128'), ('IP12', 'DL_256'), ('IP12', 'DL_512'),
('IP12PRO', 'DL_64'), ('IP12PRO', 'DL_128'), ('IP12PRO', 'DL_256'), ('IP12PRO', 'DL_512'),
('IP12PROMAX', 'DL_64'), ('IP12PROMAX', 'DL_128'), ('IP12PROMAX', 'DL_256'), ('IP12PROMAX', 'DL_512'),
('IP13', 'DL_64'), ('IP13', 'DL_128'), ('IP13', 'DL_256'), ('IP13', 'DL_512'),
('IP13PRO', 'DL_64'), ('IP13PRO', 'DL_128'), ('IP13PRO', 'DL_256'), ('IP13PRO', 'DL_512'),
('IP13PROMAX', 'DL_64'), ('IP13PROMAX', 'DL_128'), ('IP13PROMAX', 'DL_256'), ('IP13PROMAX', 'DL_512'),
('IP14', 'DL_64'), ('IP14', 'DL_128'), ('IP14', 'DL_256'), ('IP14', 'DL_512'), ('IP14', 'DL_1024'), ('IP14', 'DL_2048'),
('IP14PLUS', 'DL_64'), ('IP14PLUS', 'DL_128'), ('IP14PLUS', 'DL_256'), ('IP14PLUS', 'DL_512'), ('IP14PLUS', 'DL_1024'),('IP14PLUS', 'DL_2048'),
('IP14PRO', 'DL_64'), ('IP14PRO', 'DL_128'), ('IP14PRO', 'DL_256'), ('IP14PRO', 'DL_512'), ('IP14PRO', 'DL_1024'),('IP14PRO', 'DL_2048'),
('IP14PROMAX', 'DL_64'), ('IP14PROMAX', 'DL_128'), ('IP14PROMAX', 'DL_256'), ('IP14PROMAX', 'DL_512'), ('IP14PROMAX', 'DL_1024'),('IP14PROMAX', 'DL_2048'),
('IP15', 'DL_64'), ('IP15', 'DL_128'), ('IP15', 'DL_256'), ('IP15', 'DL_512'), ('IP15', 'DL_1024'),('IP15', 'DL_2048'),
('IP15PLUS', 'DL_64'), ('IP15PLUS', 'DL_128'), ('IP15PLUS', 'DL_256'), ('IP15PLUS', 'DL_512'), ('IP15PLUS', 'DL_1024'),('IP15PLUS', 'DL_2048'),
('IP15PRO', 'DL_64'), ('IP15PRO', 'DL_128'), ('IP15PRO', 'DL_256'), ('IP15PRO', 'DL_512'), ('IP15PRO', 'DL_1024'),('IP15PRO', 'DL_2048'),
('IP15PROMAX', 'DL_64'), ('IP15PROMAX', 'DL_128'), ('IP15PROMAX', 'DL_256'), ('IP15PROMAX', 'DL_512'), ('IP15PROMAX', 'DL_1024'),('IP15PROMAX', 'DL_2048'),
('IP16', 'DL_64'), ('IP16', 'DL_128'), ('IP16', 'DL_256'), ('IP16', 'DL_512'), ('IP16', 'DL_1024'),('IP16', 'DL_2048'),
('IP16PLUS', 'DL_64'), ('IP16PLUS', 'DL_128'), ('IP16PLUS', 'DL_256'), ('IP16PLUS', 'DL_512'), ('IP16PLUS', 'DL_1024'),('IP16PLUS', 'DL_2048'),
('IP16PRO', 'DL_64'), ('IP16PRO', 'DL_128'), ('IP16PRO', 'DL_256'), ('IP16PRO', 'DL_512'), ('IP16PRO', 'DL_1024'),('IP16PRO', 'DL_2048'),
('IP16PROMAX', 'DL_64'), ('IP16PROMAX', 'DL_128'), ('IP16PROMAX', 'DL_256'), ('IP16PROMAX', 'DL_512'), ('IP16PROMAX', 'DL_1024'),('IP16PROMAX', 'DL_2048');
GO
CREATE TABLE KHACHHANG (
    MAKH VARCHAR(10) PRIMARY KEY,
    TENKH NVARCHAR(255) NOT NULL,
    GIOITINH BIT DEFAULT(1),
    SDT VARCHAR(15) NOT NULL,
    DIACHI NVARCHAR(255) NOT NULL
);
GO
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, SDT, DIACHI)
VALUES
('KH001', N'Nguyễn Văn An', 1, '0912345678', N'123 Đường Lê Duẩn, Nha Trang, Khánh Hòa'),
('KH002', N'Nguyễn Thị Bình', 0, '0912345679', N'456 Đường Nguyễn Trãi, Nha Trang, Khánh Hòa'),
('KH003', N'Trần Minh Cường', 1, '0912345680', N'789 Đường Nguyễn Văn Cừ, Nha Trang, Khánh Hòa'),
('KH004', N'Phạm Quỳnh Duyên', 0, '0912345681', N'1010 Đường Cộng Hòa, Nha Trang, Khánh Hòa'),
('KH005', N'Vũ Quốc Huy', 1, '0912345682', N'1112 Đường Hòa Bình, Nha Trang, Khánh Hòa'),
('KH006', N'Lê Thi Hồng', 0, '0912345683', N'1314 Đường Phạm Văn Đồng, Nha Trang, Khánh Hòa'),
('KH007', N'Hồ Văn Hải', 1, '0912345684', N'1516 Đường Bạch Đằng, Nha Trang, Khánh Hòa'),
('KH008', N'Nguyễn Mai Kim', 0, '0912345685', N'1718 Đường Nguyễn Thị Minh Khai, Nha Trang, Khánh Hòa'),
('KH009', N'Toàn Thị Lan', 0, '0912345686', N'1920 Đường Phan Đăng Lưu, Nha Trang, Khánh Hòa'),
('KH010', N'Trương Minh Mạnh', 1, '0912345687', N'2122 Đường Võ Thị Sáu, Nha Trang, Khánh Hòa'),
('KH011', N'Đỗ Thị Ngọc', 0, '0912345688', N'2324 Đường Lê Văn Sỹ, Nha Trang, Khánh Hòa'),
('KH012', N'Nguyễn Tuấn Oanh', 1, '0912345689', N'2526 Đường Lý Thường Kiệt, Nha Trang, Khánh Hòa'),
('KH013', N'Nguyễn Thi Quỳnh', 0, '0912345690', N'2728 Đường Cách Mạng Tháng 8, Nha Trang, Khánh Hòa'),
('KH014', N'Phạm Quang Rất', 1, '0912345691', N'2930 Đường Điện Biên Phủ, Nha Trang, Khánh Hòa'),
('KH015', N'Vũ Thị Sương', 0, '0912345692', N'3132 Đường Lê Hồng Phong, Nha Trang, Khánh Hòa'),
('KH016', N'Lê Quang Tân', 1, '0912345693', N'3334 Đường Hồ Tùng Mậu, Nha Trang, Khánh Hòa'),
('KH017', N'Hồ Văn Út', 1, '0912345694', N'3536 Đường Trần Phú, Nha Trang, Khánh Hòa'),
('KH018', N'Nguyễn Mai Vân', 0, '0912345695', N'3738 Đường Nguyễn Hữu Cảnh, Nha Trang, Khánh Hòa'),
('KH019', N'Toàn Thị Quế', 0, '0912345696', N'3939 Đường Sư Vạn Hạnh, Nha Trang, Khánh Hòa'),
('KH020', N'Trương Minh Xuyên', 1, '0912345697', N'4140 Đường Lý Tự Trọng, Nha Trang, Khánh Hòa'),
('KH021', N'Đỗ Thị Yên', 0, '0912345698', N'4342 Đường Nguyễn Văn Linh, Nha Trang, Khánh Hòa'),
('KH022', N'Nguyễn Tuấn Zhi', 1, '0912345699', N'4544 Đường Lê Thị Hồng Gấm, Nha Trang, Khánh Hòa'),
('KH023', N'Nguyễn Thi Anh', 0, '0912345700', N'4746 Đường Tô Ký, Nha Trang, Khánh Hòa'),
('KH024', N'Phạm Quang Ái', 1, '0912345701', N'4948 Đường Trường Chinh, Nha Trang, Khánh Hòa'),
('KH025', N'Vũ Thị Hạnh', 0, '0912345702', N'5150 Đường Tân Kỳ Tân Quý, Nha Trang, Khánh Hòa'),
('KH026', N'Lê Quang Hải', 1, '0912345703', N'5352 Đường Ngô Gia Tự, Nha Trang, Khánh Hòa'),
('KH027', N'Hồ Văn An', 1, '0912345704', N'5554 Đường Cầu Giấy, Nha Trang, Khánh Hòa'),
('KH028', N'Nguyễn Mai Ngọc', 0, '0912345705', N'5756 Đường Lương Định Của, Nha Trang, Khánh Hòa'),
('KH029', N'Toàn Thị Minh', 0, '0912345706', N'5958 Đường Lê Đức Thọ, Nha Trang, Khánh Hòa'),
('KH030', N'Trương Minh Hảo', 1, '0912345707', N'6160 Đường Quang Trung, Nha Trang, Khánh Hòa');
GO
CREATE TABLE HOADON (
    MAHD VARCHAR(10) PRIMARY KEY,
    MAKH VARCHAR(10) NOT NULL,
    NGAYMUA DATE NOT NULL,
    MANV VARCHAR(10),
    TONGTIEN DECIMAL(18,0),
	TRANGTHAI_THANHTOAN BIT DEFAULT 0,
    FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV) ON UPDATE CASCADE ON DELETE CASCADE,
);
GO
INSERT INTO HOADON (MAHD, MAKH, NGAYMUA, MANV, TONGTIEN, TRANGTHAI_THANHTOAN)
VALUES
('HD001', 'KH001', CAST('2024-12-12' AS DATE), 'NVTT1', 9357500, 1),
('HD002', 'KH002', CAST('2024-12-12' AS DATE), 'NVTT2', 10307500, 1),
('HD003', 'KH003', CAST('2024-12-13' AS DATE), 'NVTT3', 12107500, 1),
('HD004', 'KH004', CAST('2024-12-13' AS DATE), 'NVTT4', 10307500, 1),
('HD005', 'KH005', CAST('2024-12-14' AS DATE), 'NVTT5', 12107500, 1),
('HD006', 'KH006', CAST('2024-12-14' AS DATE), 'NVTT6', 11257500, 1),
('HD007', 'KH007', CAST('2024-12-15' AS DATE), 'NVTT7', 12107500, 1),
('HD008', 'KH008', CAST('2024-12-15' AS DATE), 'NVTT8', 14107500, 1),
('HD009', 'KH009', CAST('2024-12-16' AS DATE), 'NVTT1', 15057500, 1),
('HD010', 'KH010', CAST('2024-12-16' AS DATE), 'NVTT2', 13157500, 1),
('HD011', 'KH011', CAST('2024-12-17' AS DATE), 'NVTT3', 15057500, 1),
('HD012', 'KH012', CAST('2024-12-17' AS DATE), 'NVTT4', 16007500, 1),
('HD013', 'KH013', CAST('2024-12-18' AS DATE), 'NVTT5', 14107500, 1),
('HD014', 'KH014', CAST('2024-12-18' AS DATE), 'NVTT6', 15057500, 1),
('HD015', 'KH015', CAST('2024-12-19' AS DATE), 'NVTT7', 16007500, 1),
('HD016', 'KH016', CAST('2024-12-19' AS DATE), 'NVTT8', 11257500, 1),
('HD017', 'KH017', CAST('2024-12-20' AS DATE), 'NVTT1', 13157500, 1),
('HD018', 'KH018', CAST('2024-12-20' AS DATE), 'NVTT2', 12107500, 1),
('HD019', 'KH019', CAST('2024-12-21' AS DATE), 'NVTT3', 9357500, 1),
('HD020', 'KH020', CAST('2024-12-21' AS DATE), 'NVTT4', 12107500, 1),
('HD021', 'KH021', CAST('2024-12-22' AS DATE), 'NVTT5', 15057500, 1),
('HD022', 'KH022', CAST('2024-12-22' AS DATE), 'NVTT6', 16957500, 1),
('HD023', 'KH023', CAST('2024-12-23' AS DATE), 'NVTT7', 12107500, 1),
('HD024', 'KH024', CAST('2024-12-23' AS DATE), 'NVTT8', 14107500, 1),
('HD025', 'KH025', CAST('2024-12-24' AS DATE), 'NVTT1', 11257500, 1),
('HD026', 'KH026', CAST('2024-12-24' AS DATE), 'NVTT2', 15057500, 1),
('HD027', 'KH027', CAST('2024-12-25' AS DATE), 'NVTT3', 14107500, 1),
('HD028', 'KH028', CAST('2024-12-25' AS DATE), 'NVTT4', 11257500, 1),
('HD029', 'KH029', CAST('2024-12-26' AS DATE), 'NVTT5', 12107500, 1),
('HD030', 'KH030', CAST('2024-12-26' AS DATE), 'NVTT6', 16007500, 1);
GO
CREATE TABLE CHITIET_HOADON (
    MACTHD INT IDENTITY(1,1) PRIMARY KEY,
    MAHD VARCHAR(10),
    MASP VARCHAR(10),
    MAMAU VARCHAR(30),
    MADL VARCHAR(10),
    SOLUONG INT NOT NULL,
    GIABAN DECIMAL(18,0) NOT NULL,
    KHUYENMAI INT DEFAULT 0,
    THANHTIEN AS ((SOLUONG * GIABAN) - KHUYENMAI) PERSISTED NOT NULL,
    FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (MASP, MAMAU) REFERENCES MAUSAC_SANPHAM(MASP, MAMAU),
    FOREIGN KEY (MASP,MADL) REFERENCES DUNGLUONG_SANPHAM(MASP,MADL),
);
GO
INSERT INTO CHITIET_HOADON (MAHD, MASP, MAMAU, MADL, SOLUONG, GIABAN, KHUYENMAI)
VALUES
('HD001', 'IP11', 'M_TIM', 'DL_64', 1, 9850000, 492500),
('HD002', 'IP12', 'M_XANH_LA', 'DL_128', 2, 10850000, 542500),
('HD003', 'IP13PRO', 'M_XANH_REU', 'DL_256', 1, 12850000, 642500),
('HD004', 'IP11PRO', 'M_XAM', 'DL_256', 1, 10850000, 542500),
('HD005', 'IP12PROMAX', 'M_XANH_DUONG', 'DL_512', 3, 12850000, 642500),
('HD006', 'IP13', 'M_XANH_LUC', 'DL_128', 2, 11850000, 592500),
('HD007', 'IP14', 'M_XANH_NHAT', 'DL_256', 1, 12850000, 642500),
('HD008', 'IP14PRO', 'M_TIM_HOANG_GIA', 'DL_512', 1, 14850000, 742500),
('HD009', 'IP14PROMAX', 'M_TIM_HOANG_GIA', 'DL_1024', 2, 15850000, 792500),
('HD010', 'IP15', 'M_DEN_TITAN', 'DL_256', 2, 13850000, 692500),
('HD011', 'IP15PRO', 'M_DEN_TITAN', 'DL_1024', 1, 15850000, 792500),
('HD012', 'IP15PROMAX', 'M_DEN_TITAN', 'DL_2048', 3, 16850000, 842500),
('HD013', 'IP16', 'M_DEN_TITAN', 'DL_512', 1, 14850000, 742500),
('HD014', 'IP16PLUS', 'M_XANH_DUONG', 'DL_1024', 2, 15850000, 792500),
('HD015', 'IP16PRO', 'M_DEN_TITAN', 'DL_256', 1, 16850000, 842500),
('HD016', 'IP12PRO', 'M_XANH_DUONG', 'DL_128', 1, 11850000, 592500),
('HD017', 'IP13PROMAX', 'M_XANH_REU', 'DL_128', 3, 13850000, 692500),
('HD018', 'IP14PLUS', 'M_XANH_LA', 'DL_1024', 2, 12850000, 642500),
('HD019', 'IP11', 'M_TIM', 'DL_64', 2, 9850000, 492500),
('HD020', 'IP14', 'M_VANG', 'DL_128', 1, 12850000, 642500),
('HD021', 'IP15PRO', 'M_DEN_TITAN', 'DL_1024', 1, 15850000, 792500),
('HD022', 'IP16PROMAX', 'M_VANG_TITAN', 'DL_2048', 1, 17850000, 892500),
('HD023', 'IP14PLUS', 'M_XANH_LA', 'DL_256', 3, 12850000, 642500),
('HD024', 'IP15PLUS', 'M_XANH_DUONG', 'DL_512', 2, 14850000, 742500),
('HD025', 'IP11PROMAX', 'M_XAM', 'DL_128', 2, 11850000, 592500),
('HD026', 'IP14PROMAX', 'M_VANG', 'DL_2048', 1, 15850000, 792500),
('HD027', 'IP16', 'M_XANH_TITAN', 'DL_512', 1, 14850000, 742500),
('HD028', 'IP13', 'M_XANH_DUONG', 'DL_256', 1, 11850000, 592500),
('HD029', 'IP12PROMAX', 'M_XANH_DUONG', 'DL_128', 2, 12850000, 642500),
('HD030', 'IP15PROMAX', 'M_XANH_TITAN', 'DL_2048', 3, 16850000, 842500);
GO
CREATE TABLE TAIKHOAN_NV (
    MATK VARCHAR(10) PRIMARY KEY,
    TENTK VARCHAR(255) NOT NULL,
    MATKHAU VARCHAR(50) NOT NULL,
    MANV VARCHAR(10) NOT NULL,
    QUYEN NVARCHAR(255),
    FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV) ON UPDATE CASCADE ON DELETE CASCADE
);
GO
INSERT INTO TAIKHOAN_NV (MATK, TENTK, MATKHAU, MANV, QUYEN) VALUES
('TK01', 'nam.nv', 'tt1234', 'NVTT1', 'Nhân viên bán hàng'),
('TK02', 'chi.pbc', 'tt5678', 'NVTT2', 'Nhân viên bán hàng'),
('TK03', 'cuong.lvt', 'tt9101', 'NVTT3', 'Nhân viên bán hàng'),
('TK04', 'thuy.vdt', 'tt1122', 'NVTT4', 'Nhân viên bán hàng'),
('TK05', 'minh.hxm', 'tt3344', 'NVTT5', 'Nhân viên bán hàng'),
('TK06', 'tam.ptt', 'tt5566', 'NVTT6', 'Nhân viên bán hàng'),
('TK07', 'thi.ttt', 'tt7788', 'NVTT7', 'Nhân viên bán hàng'),
('TK08', 'mai.ntq', 'tt9900', 'NVTT8', 'Nhân viên bán hàng'),
('TK09', 'le.dv', 'tt1235', 'NVTT9', 'Kỹ thuật viên'),
('TK10', 'trinh.btk', 'tt5679', 'NVTT10', 'Nhân viên kỹ thuật'),
('TK11', 'linh.dvl', 'tt9102', 'NVTT11', 'Trưởng phòng'),
('TK12', 'nhai.ttm', 'tt1123', 'NVTT12', 'Nhân viên kỹ thuật'),
('TK13', 'ninh.da', 'tt3345', 'NVTT13', 'Kỹ thuật viên'),
('TK14', 'quynh.vtp', 'tt5567', 'NVTT14', 'Nhân viên kỹ thuật'),
('TK15', 'quyen.hvv', 'tt7789', 'NVTT15', 'Nhân viên kỹ thuật'),
('TK16', 'van.ngt', 'tt9901', 'NVTT16', 'Nhân viên kỹ thuật'),
('TK17', 'truong.dx', 'tt1236', 'NVTT17', 'Quản lý cửa hàng'),
('TK18', 'kieu.ttk', 'tt5670', 'NVTT18', 'Phó quản lý cửa hàng'),
('TK19', 'vuu.tvv', 'tt9103', 'NVTT19', 'Trưởng bộ phận tư vấn khách hàng'),
('TK20', 'quyen.tt', 'tt1124', 'NVTT20', 'Phó bộ phận kỹ thuật sửa chữa'),
('TK21', 'manh.qv', 'tt3346', 'NVTT21', 'Trưởng bộ phận kỹ thuật sửa chữa'),
('TK22', 'hoa.tl', 'tt5568', 'NVTT22', 'Phó quản lý cửa hàng'),
('TK23', 'huy.hv', 'tt7780', 'NVTT23', 'Trưởng bộ phận quản lý kho hàng và giao hàng'),
('TK24', 'my.ktm', 'tt9902', 'NVTT24', 'Phó bộ phận quản lý kho hàng và giao hàng'),
('TK25', 'bach.dv', 'tt1237', 'NVTT25', 'Nhân viên giao hàng'),
('TK26', 'trieu.ltc', 'tt5671', 'NVTT26', 'Nhân viên kho'),
('TK27', 'son.lts', 'tt9104', 'NVTT27', 'Nhân viên giao hàng'),
('TK28', 'hoai.tth', 'tt1125', 'NVTT28', 'Trợ lý kho'),
('TK29', 'truong.pv', 'tt3347', 'NVTT29', 'Nhân viên kho'),
('TK30', 'nhung.htn', 'tt5569', 'NVTT30', 'Trợ lý kho');
GO
CREATE TABLE KHOHANG (
    MAKHO VARCHAR(10) PRIMARY KEY,
    MASP VARCHAR(10),
    SOLUONGTON INT NOT NULL,
    NGAYNHAP DATE NOT NULL,
    FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP) ON UPDATE CASCADE ON DELETE CASCADE
);
INSERT INTO KHOHANG (MAKHO, MASP, SOLUONGTON, NGAYNHAP) VALUES
('KH01', 'IP11', 8, CAST('2024-05-15' AS DATE)),
('KH02', 'IP11PRO', 7, CAST('2024-06-10' AS DATE)),
('KH03', 'IP11PROMAX', 12, CAST('2024-07-20' AS DATE)),
('KH04', 'IP12', 8, CAST('2024-04-22' AS DATE)),
('KH05', 'IP12PRO', 7, CAST('2024-08-05' AS DATE)),
('KH06', 'IP12PROMAX', 12, CAST('2024-09-01' AS DATE)),
('KH07', 'IP13', 8, CAST('2024-10-10' AS DATE)),
('KH08', 'IP13PRO', 7, CAST('2024-11-01' AS DATE)),
('KH09', 'IP13PROMAX', 12, CAST('2024-12-01' AS DATE)),
('KH10', 'IP14', 8, CAST('2024-01-15' AS DATE)),
('KH11', 'IP14PLUS', 7, CAST('2024-02-10' AS DATE)),
('KH12', 'IP14PRO', 12, CAST('2024-03-20' AS DATE)),
('KH13', 'IP14PROMAX', 8, CAST('2024-04-05' AS DATE)),
('KH14', 'IP15', 7, CAST('2024-05-01' AS DATE)),
('KH15', 'IP15PLUS', 12, CAST('2024-06-15' AS DATE)),
('KH16', 'IP15PRO', 8, CAST('2024-07-10' AS DATE)),
('KH17', 'IP15PROMAX', 7, CAST('2024-08-20' AS DATE)),
('KH18', 'IP16', 12, CAST('2024-09-10' AS DATE)),
('KH19', 'IP16PLUS', 8, CAST('2024-10-01' AS DATE)),
('KH20', 'IP16PRO', 7, CAST('2024-11-05' AS DATE)),
('KH21', 'IP16PROMAX', 12, CAST('2024-12-10' AS DATE));

GO
CREATE TABLE CHITIET_NHAPHANG (
    MA_NHAPHANG VARCHAR(10) PRIMARY KEY,
    MASP VARCHAR(10),
    SOLUONG_NHAP INT NOT NULL,
    NGAY_NHAPHANG DATE NOT NULL,
    GIANHAP DECIMAL(18,0) NOT NULL,
    GIABAN DECIMAL(18,0) NOT NULL,
    FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP) ON UPDATE CASCADE ON DELETE CASCADE
);
GO
INSERT INTO CHITIET_NHAPHANG (MA_NHAPHANG, MASP, SOLUONG_NHAP, NGAY_NHAPHANG, GIANHAP, GIABAN) VALUES
('NH01', 'IP11', 30, '2024-05-15', 8800000, 9850000),
('NH02', 'IP11PRO', 35, '2024-06-10', 9800000, 10850000),
('NH03', 'IP11PROMAX', 30, '2024-05-10', 10350000, 11850000),
('NH04', 'IP12', 45, '2024-04-22', 9800000, 10850000),
('NH05', 'IP12PRO', 27, '2024-08-05', 9800000, 11850000),
('NH06', 'IP12PROMAX', 38, '2024-09-01', 11850000, 12850000),
('NH07', 'IP13', 40, '2024-10-10', 11350000, 11850000),
('NH08', 'IP13PRO', 33, '2024-11-01', 11850000, 12850000),
('NH09', 'IP13PROMAX', 42, '2024-12-01', 12850000, 13850000),
('NH10', 'IP14', 25, '2024-01-15', 11850000, 12850000),
('NH11', 'IP14PLUS', 32, '2024-02-10', 12850000, 13850000),
('NH12', 'IP14PRO', 50, '2024-03-20', 13850000, 14850000),
('NH13', 'IP14PROMAX', 38, '2024-04-05', 14850000, 15850000),
('NH14', 'IP15', 50, '2024-05-01', 13350000, 13850000),
('NH15', 'IP15PLUS', 40, '2024-06-15', 14350000, 14850000),
('NH16', 'IP15PRO', 45, '2024-07-10', 15350000, 15850000),
('NH17', 'IP15PROMAX', 42, '2024-08-20', 16350000, 16850000),
('NH18', 'IP16', 30, '2024-09-10', 14350000, 14850000),
('NH19', 'IP16PLUS', 37, '2024-10-01', 15350000, 15850000),
('NH20', 'IP16PRO', 33, '2024-11-05', 16350000, 16850000),
('NH21', 'IP16PROMAX', 38, '2024-12-10', 17350000, 17850000);
GO
CREATE TABLE KHUYENMAI (
    MAKM VARCHAR(10) PRIMARY KEY,
    TENCTKM NVARCHAR(255) NOT NULL,
    GIAMGIA INT CHECK (GIAMGIA BETWEEN 0 AND 100) NOT NULL,
    NGAYBATDAU DATE NOT NULL,
    NGAYKETTHUC DATE NOT NULL
);
GO
INSERT INTO KHUYENMAI (MAKM, TENCTKM, GIAMGIA, NGAYBATDAU, NGAYKETTHUC)
VALUES ('KM01', N'Khuyến mãi khai trương', 5, '2024-12-12', '2024-12-31');
GO
CREATE TABLE CHITIET_KHUYENMAI (
    MACTKM VARCHAR(10) PRIMARY KEY,
    MAKM VARCHAR(10) NOT NULL,
    MASP VARCHAR(10) NOT NULL,
    GIAMGIA INT CHECK (GIAMGIA BETWEEN 0 AND 100) NOT NULL,
    NOTE NVARCHAR(100),
    FOREIGN KEY (MAKM) REFERENCES KHUYENMAI(MAKM) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP) ON UPDATE CASCADE ON DELETE CASCADE
);
GO
INSERT INTO CHITIET_KHUYENMAI (MACTKM, MAKM, MASP, GIAMGIA, NOTE)
SELECT 'CTKM' + RIGHT('000' + CAST(ROW_NUMBER() OVER (ORDER BY MASP) AS VARCHAR(3)), 3), 
       'KM01', MASP, 5, N'Giảm giá nhân dịp khai trương'
FROM SANPHAM;
GO
CREATE TABLE THANHTOAN (
    MATT VARCHAR(10) PRIMARY KEY,
    MAHD VARCHAR(10) NOT NULL,
    PHUONGTHUCTHANHTOAN NVARCHAR(255) NOT NULL,
    TRANGTHAI_THANHTOAN BIT NOT NULL DEFAULT 0,
    NGAYTHANHTOAN DATE NOT NULL,
    FOREIGN KEY (MAHD) REFERENCES HOADON(MAHD) ON UPDATE CASCADE ON DELETE CASCADE
);
GO
INSERT INTO THANHTOAN (MATT, MAHD, PHUONGTHUCTHANHTOAN, TRANGTHAI_THANHTOAN, NGAYTHANHTOAN)
VALUES
('TT001', 'HD001', N'Tiền mặt', 1, CAST('2024-12-12' AS DATE)),
('TT002', 'HD002', N'Chuyển khoản ngân hàng', 1, CAST('2024-12-12' AS DATE)),
('TT003', 'HD003', N'Thẻ tín dụng', 1, CAST('2024-12-13' AS DATE)),
('TT004', 'HD004', N'Momo', 1, CAST('2024-12-13' AS DATE)),
('TT005', 'HD005', N'Tiền mặt', 1, CAST('2024-12-14' AS DATE)),
('TT006', 'HD006', N'Chuyển khoản ngân hàng', 1, CAST('2024-12-14' AS DATE)),
('TT007', 'HD007', N'Thẻ tín dụng', 1, CAST('2024-12-15' AS DATE)),
('TT008', 'HD008', N'Momo', 1, CAST('2024-12-15' AS DATE)),
('TT009', 'HD009', N'Tiền mặt', 1, CAST('2024-12-16' AS DATE)),
('TT010', 'HD010', N'Chuyển khoản ngân hàng', 1, CAST('2024-12-16' AS DATE)),
('TT011', 'HD011', N'Thẻ tín dụng', 1, CAST('2024-12-17' AS DATE)),
('TT012', 'HD012', N'Momo', 1, CAST('2024-12-17' AS DATE)),
('TT013', 'HD013', N'Tiền mặt', 1, CAST('2024-12-18' AS DATE)),
('TT014', 'HD014', N'Chuyển khoản ngân hàng', 1, CAST('2024-12-18' AS DATE)),
('TT015', 'HD015', N'Thẻ tín dụng', 1, CAST('2024-12-19' AS DATE)),
('TT016', 'HD016', N'Momo', 1, CAST('2024-12-19' AS DATE)),
('TT017', 'HD017', N'Tiền mặt', 1, CAST('2024-12-20' AS DATE)),
('TT018', 'HD018', N'Chuyển khoản ngân hàng', 1, CAST('2024-12-20' AS DATE)),
('TT019', 'HD019', N'Thẻ tín dụng', 1, CAST('2024-12-21' AS DATE)),
('TT020', 'HD020', N'Momo', 1, CAST('2024-12-21' AS DATE)),
('TT021', 'HD021', N'Tiền mặt', 1, CAST('2024-12-22' AS DATE)),
('TT022', 'HD022', N'Chuyển khoản ngân hàng', 1, CAST('2024-12-22' AS DATE)),
('TT023', 'HD023', N'Thẻ tín dụng', 1, CAST('2024-12-23' AS DATE)),
('TT024', 'HD024', N'Momo', 1, CAST('2024-12-23' AS DATE)),
('TT025', 'HD025', N'Tiền mặt', 1, CAST('2024-12-24' AS DATE)),
('TT026', 'HD026', N'Chuyển khoản ngân hàng', 1, CAST('2024-12-24' AS DATE)),
('TT027', 'HD027', N'Thẻ tín dụng', 1, CAST('2024-12-25' AS DATE)),
('TT028', 'HD028', N'Momo', 1, CAST('2024-12-25' AS DATE)),
('TT029', 'HD029', N'Tiền mặt', 1, CAST('2024-12-26' AS DATE)),
('TT030', 'HD030', N'Tiền mặt', 1, CAST('2024-12-26' AS DATE));

DROP PROCEDURE IF EXISTS NHANVIEN_TIMKIEM;
GO
CREATE PROCEDURE NHANVIEN_TIMKIEM
    @MANV VARCHAR(10) = NULL,
    @HOTEN VARCHAR(255) = NULL,
    @GIOITINH BIT = NULL,
    @MaBP VARCHAR(10) = NULL
AS
BEGIN
    DECLARE @SQLSTR NVARCHAR(4000);

    SET @SQLSTR = '
       SELECT * 
       FROM NHANVIEN
       WHERE 1=1
    ';

    IF @MANV IS NOT NULL
        SET @SQLSTR += ' AND MANV LIKE ''%' + @MANV + '%''';

    IF @HOTEN IS NOT NULL
        SET @SQLSTR += ' AND (HONV + '' '' + TENNV LIKE ''%' + @HOTEN + '%'')';

    IF @GIOITINH IS NOT NULL
        SET @SQLSTR += ' AND GIOITINH = ' + CAST(@GIOITINH AS NVARCHAR);

    IF @MaBP IS NOT NULL
        SET @SQLSTR += ' AND MABP LIKE ''%' + @MaBP + '%''';

    EXEC SP_EXECUTESQL @SQLSTR;
END;

GO
DROP PROCEDURE IF EXISTS HOADON_TIMKIEM;
GO
CREATE PROCEDURE HOADON_TIMKIEM
    @MAHD VARCHAR(10) = NULL,
    @MAKH VARCHAR(10) = NULL,
    @NGAYMUA DATE = NULL,
    @MANV VARCHAR(10) = NULL
AS
BEGIN
    DECLARE @SQLSTR NVARCHAR(4000);

    SET @SQLSTR = '
       SELECT * 
       FROM HOADON
       WHERE 1=1
    ';

    IF @MAHD IS NOT NULL
        SET @SQLSTR += ' AND MAHD LIKE ''%' + @MAHD + '%''';

    IF @MAKH IS NOT NULL
        SET @SQLSTR += ' AND MAKH LIKE ''%' + @MAKH + '%''';

    IF @NGAYMUA IS NOT NULL
        SET @SQLSTR += ' AND NGAYMUA = ''' + CONVERT(varchar(10), @NGAYMUA, 120) + '''';

    IF @MANV IS NOT NULL
        SET @SQLSTR += ' AND MANV LIKE ''%' + @MANV + '%''';

    EXEC SP_EXECUTESQL @SQLSTR;
END;
GO
DROP PROCEDURE IF EXISTS KHACHHANG_TIMKIEM;
GO
CREATE PROCEDURE KHACHHANG_TIMKIEM
    @MAKH VARCHAR(10) = NULL,
    @TENKH VARCHAR(255) = NULL,
    @SDT VARCHAR(15) = NULL
AS
BEGIN
    DECLARE @SQLSTR NVARCHAR(4000);

    SET @SQLSTR = '
       SELECT * 
       FROM KHACHHANG
       WHERE 1=1
    ';

    IF @MAKH IS NOT NULL
        SET @SQLSTR += ' AND MAKH LIKE ''%' + @MAKH + '%''';

    IF @TENKH IS NOT NULL
        SET @SQLSTR += ' AND TENKH LIKE ''%' + @TENKH + '%''';

    IF @SDT IS NOT NULL
        SET @SQLSTR += ' AND SDT LIKE ''%' + @SDT + '%''';

    EXEC SP_EXECUTESQL @SQLSTR;
END;
GO
DROP PROCEDURE IF EXISTS TAIKHOANNV_TIMKIEM;
GO
CREATE PROCEDURE TAIKHOANNV_TIMKIEM
    @TENTK VARCHAR(255) = NULL,
    @MATKHAU VARCHAR(50) = NULL,
    @MANV VARCHAR(10) = NULL
AS
BEGIN
    DECLARE @SQLSTR NVARCHAR(4000);

    SET @SQLSTR = '
       SELECT * 
       FROM TAIKHOAN_NV
       WHERE 1=1
    ';

    IF @TENTK IS NOT NULL
        SET @SQLSTR += ' AND TENTK LIKE ''%' + @TENTK + '%''';

    IF @MATKHAU IS NOT NULL
        SET @SQLSTR += ' AND MATKHAU LIKE ''%' + @MATKHAU + '%''';

    IF @MANV IS NOT NULL
        SET @SQLSTR += ' AND MANV LIKE ''%' + @MANV + '%''';

    EXEC SP_EXECUTESQL @SQLSTR;
END;
GO
DROP PROCEDURE IF EXISTS KHOHANG_TIMKIEM;
GO
CREATE PROCEDURE KHOHANG_TIMKIEM
    @MASP VARCHAR(10) = NULL,
    @NGAYNHAP DATE = NULL
AS
BEGIN
    DECLARE @SQLSTR NVARCHAR(4000);

    SET @SQLSTR = '
       SELECT * 
       FROM KHOHANG
       WHERE 1=1
    ';

    IF @MASP IS NOT NULL
        SET @SQLSTR += ' AND MASP = ''' + @MASP + ''''; 

    IF @NGAYNHAP IS NOT NULL
        SET @SQLSTR += ' AND NGAYNHAP = ''' + CONVERT(varchar(10), @NGAYNHAP, 120) + ''''; 

    EXEC SP_EXECUTESQL @SQLSTR;
END;

GO
DROP PROCEDURE IF EXISTS NHAPHANG_TIMKIEM;
GO
CREATE PROCEDURE NHAPHANG_TIMKIEM
    @MASP VARCHAR(10) = NULL,
    @NGAY_NHAPHANG DATE = NULL
AS
BEGIN
    DECLARE @SQLSTR NVARCHAR(4000);

    SET @SQLSTR = '
       SELECT * 
       FROM CHITIET_NHAPHANG
       WHERE 1=1
    ';

    IF @MASP IS NOT NULL
        SET @SQLSTR += ' AND MASP = ''' + @MASP + ''''; 

    IF @NGAY_NHAPHANG IS NOT NULL
        SET @SQLSTR += ' AND NGAY_NHAPHANG = ''' + CONVERT(varchar(10), @NGAY_NHAPHANG, 120) + '''';

    EXEC SP_EXECUTESQL @SQLSTR;
END;

